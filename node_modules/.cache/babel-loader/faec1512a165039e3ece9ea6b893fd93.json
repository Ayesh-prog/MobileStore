{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\User\\\\Desktop\\\\maria\\\\e-commerce-website-using-React-and-Redux\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport { FETCH_PRODUCTS_BEGIN, FETCH_PRODUCTS_SUCCESS, FETCH_PRODUCTS_FAILURE, ADD_CART, NOTHING, REMOVE_CART, INCREMENT, DECREMENT, CLEAR_CART } from '../actions/productActions';\nvar initialState = {\n  products: [],\n  loading: false,\n  error: null,\n  cart: []\n};\nexport default function productReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case FETCH_PRODUCTS_BEGIN:\n      return _objectSpread({}, state, {\n        loading: true,\n        error: null\n      });\n\n    case FETCH_PRODUCTS_SUCCESS:\n      return _objectSpread({}, state, {\n        cart: [],\n        loading: false,\n        products: action.payload.products\n      });\n\n    case FETCH_PRODUCTS_FAILURE:\n      return _objectSpread({}, state, {\n        loading: false,\n        error: action.payload.error\n      });\n\n    case NOTHING:\n      return _objectSpread({}, state, {\n        loading: false,\n        error: null\n      });\n\n    case ADD_CART:\n      if (state.products.find(function (product) {\n        return product.id === action.id;\n      }).inCart === false) {\n        state.products.find(function (product) {\n          return product.id === action.id;\n        }).inCart = true;\n        state.cart.push(state.products.find(function (product) {\n          return product.id === action.id;\n        }));\n      }\n\n      return _objectSpread({}, state, {\n        loading: false,\n        error: null\n      });\n\n    case REMOVE_CART:\n      state.products.find(function (product) {\n        return product.id === action.id;\n      }).inCart = false;\n      state.products.find(function (product) {\n        return product.id === action.id;\n      }).count = 0;\n      state.products.find(function (product) {\n        return product.id === action.id;\n      }).total = 0;\n      var newCart = state.cart.filter(function (product) {\n        return product.id != action.id;\n      });\n      return _objectSpread({}, state, {\n        cart: newCart,\n        loading: false,\n        error: null\n      });\n\n    case INCREMENT:\n      state.cart.find(function (product) {\n        return product.id === action.id;\n      }).count += 1;\n      state.cart.find(function (product) {\n        return product.id === action.id;\n      }).total += state.cart.find(function (product) {\n        return product.id === action.id;\n      }).price;\n      return _objectSpread({}, state, {\n        loading: false,\n        error: null\n      });\n\n    case DECREMENT:\n      state.cart.find(function (product) {\n        return product.id === action.id;\n      }).count--;\n      state.cart.find(function (product) {\n        return product.id === action.id;\n      }).total -= state.cart.find(function (product) {\n        return product.id === action.id;\n      }).price;\n\n      if (state.cart.find(function (product) {\n        return product.id === action.id;\n      }).total < 0) {\n        state.cart.find(function (product) {\n          return product.id === action.id;\n        }).total = 0;\n      }\n\n      if (state.cart.find(function (product) {\n        return product.id === action.id;\n      }).count < 0) {\n        state.cart.find(function (product) {\n          return product.id === action.id;\n        }).count = 0;\n      }\n\n      return _objectSpread({}, state, {\n        loading: false,\n        error: null\n      });\n\n    case CLEAR_CART:\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = state.cart[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var p = _step.value;\n          state.products.find(function (product) {\n            return product.id === p.id;\n          }).count = 0;\n          state.products.find(function (product) {\n            return product.id === p.id;\n          }).total = 0;\n          state.products.find(function (product) {\n            return product.id === p.id;\n          }).inCart = false;\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return _objectSpread({}, state, {\n        cart: [],\n        loading: false,\n        error: null\n      });\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["C:\\Users\\User\\Desktop\\maria\\e-commerce-website-using-React-and-Redux\\src\\reducers\\productReducer.js"],"names":["FETCH_PRODUCTS_BEGIN","FETCH_PRODUCTS_SUCCESS","FETCH_PRODUCTS_FAILURE","ADD_CART","NOTHING","REMOVE_CART","INCREMENT","DECREMENT","CLEAR_CART","initialState","products","loading","error","cart","productReducer","state","action","type","payload","find","product","id","inCart","push","count","total","newCart","filter","price","p"],"mappings":"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","sourcesContent":["import {\r\n    FETCH_PRODUCTS_BEGIN,\r\n    FETCH_PRODUCTS_SUCCESS,\r\n    FETCH_PRODUCTS_FAILURE,\r\n    ADD_CART,\r\n    NOTHING,\r\n    REMOVE_CART,\r\n    INCREMENT, \r\n    DECREMENT,\r\n    CLEAR_CART \r\n\r\n  } from '../actions/productActions';\r\n  \r\n  const initialState = {\r\n    products: [],\r\n    loading: false,\r\n    error: null,\r\n    cart: [],\r\n  };\r\n  \r\n  export default function productReducer(state = initialState, action) {\r\n    \r\n    switch(action.type) {\r\n      case FETCH_PRODUCTS_BEGIN:\r\n        return {\r\n          ...state,\r\n          loading: true,\r\n          error: null\r\n        };\r\n  \r\n      case FETCH_PRODUCTS_SUCCESS: \r\n      return {\r\n          ...state,\r\n          cart: [],\r\n          loading: false,\r\n          products: action.payload.products\r\n        };\r\n  \r\n      case FETCH_PRODUCTS_FAILURE:\r\n        return {\r\n          ...state,\r\n          loading: false,\r\n          error: action.payload.error\r\n          \r\n        };\r\n        case NOTHING:\r\n        return {\r\n          ...state,\r\n          loading: false,\r\n          error:null\r\n        };\r\n      case ADD_CART:\r\n      if(state.products.find(product => product.id === action.id).inCart === false){\r\n      state.products.find(product => product.id === action.id).inCart = true;\r\n      state.cart.push(state.products.find(product => product.id === action.id));\r\n      }\r\n      \r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error: null\r\n      };\r\n      case REMOVE_CART:\r\n      state.products.find(product => product.id === action.id).inCart = false;\r\n      state.products.find(product => product.id === action.id).count = 0;\r\n      state.products.find(product => product.id === action.id).total = 0;\r\n      const newCart = state.cart.filter(function(product){\r\n        return product.id != action.id;\r\n    });\r\n      return {\r\n        ...state,\r\n        cart: newCart,\r\n        loading: false,\r\n        error:null\r\n      };\r\n      case INCREMENT:\r\n      state.cart.find(product => product.id === action.id).count +=1;\r\n      state.cart.find(product => product.id === action.id).total += state.cart.find(product => product.id === action.id).price;\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error:null\r\n      };\r\n      case DECREMENT:\r\n      state.cart.find(product => product.id === action.id).count --;\r\n      state.cart.find(product => product.id === action.id).total -= state.cart.find(product => product.id === action.id).price;\r\n      if(state.cart.find(product => product.id === action.id).total<0){\r\n        state.cart.find(product => product.id === action.id).total =0;\r\n      }\r\n      if(state.cart.find(product => product.id === action.id).count<0){\r\n        state.cart.find(product => product.id === action.id).count =0;\r\n      }\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error:null\r\n      };\r\n      case CLEAR_CART:\r\n      for(var p of state.cart){\r\n        state.products.find(product => product.id === p.id).count =0;  \r\n        state.products.find(product => product.id === p.id).total =0;\r\n        state.products.find(product => product.id === p.id).inCart = false;    \r\n      }\r\n      \r\n      return {\r\n        ...state,\r\n        cart: [],\r\n        loading: false,\r\n        error:null\r\n      };\r\n      default:\r\n\r\n        return state;\r\n    }\r\n  }"]},"metadata":{},"sourceType":"module"}